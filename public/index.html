<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MiniMax Video Generator - Test Interface</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell,
          sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      .header {
        text-align: center;
        color: white;
        margin-bottom: 40px;
      }

      .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
      }

      .header p {
        font-size: 1.1em;
        opacity: 0.9;
      }

      .tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 30px;
        flex-wrap: wrap;
      }

      .tab {
        padding: 12px 24px;
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        cursor: pointer;
        border-radius: 8px;
        font-size: 16px;
        transition: all 0.3s;
      }

      .tab:hover {
        background: rgba(255, 255, 255, 0.3);
      }

      .tab.active {
        background: white;
        color: #667eea;
        font-weight: 600;
      }

      .tab-content {
        display: none;
        background: white;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      }

      .tab-content.active {
        display: block;
        animation: fadeIn 0.3s;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #333;
      }

      .form-group input,
      .form-group textarea,
      .form-group select {
        width: 100%;
        padding: 12px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 15px;
        transition: border-color 0.3s;
      }

      .form-group input[type='file'] {
        padding: 10px;
        background: #f8f9fa;
        cursor: pointer;
      }

      .form-group input[type='file']::-webkit-file-upload-button {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
        margin-right: 10px;
      }

      .form-group input[type='file']::-webkit-file-upload-button:hover {
        opacity: 0.9;
      }

      .form-group input:focus,
      .form-group textarea:focus,
      .form-group select:focus {
        outline: none;
        border-color: #667eea;
      }

      .form-group textarea {
        min-height: 120px;
        resize: vertical;
        font-family: inherit;
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }

      .btn {
        padding: 14px 32px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition:
          transform 0.2s,
          box-shadow 0.2s;
        width: 100%;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
      }

      .btn:active {
        transform: translateY(0);
      }

      .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .result {
        margin-top: 30px;
        padding: 20px;
        background: #f5f5f5;
        border-radius: 8px;
        display: none;
      }

      .result.show {
        display: block;
        animation: fadeIn 0.3s;
      }

      .result h3 {
        margin-bottom: 15px;
        color: #333;
      }

      .result pre {
        background: #2d2d2d;
        color: #f8f8f2;
        padding: 15px;
        border-radius: 6px;
        overflow-x: auto;
        font-size: 14px;
      }

      .alert {
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
      }

      .alert-success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }

      .alert-error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }

      .alert-info {
        background: #d1ecf1;
        color: #0c5460;
        border: 1px solid #bee5eb;
      }

      .loading {
        display: none;
        text-align: center;
        padding: 20px;
      }

      .loading.show {
        display: block;
      }

      .spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #667eea;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto 15px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .hint {
        font-size: 13px;
        color: #666;
        margin-top: 5px;
      }

      .camera-commands {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 6px;
        margin-bottom: 20px;
      }

      .camera-commands h4 {
        margin-bottom: 10px;
        color: #333;
      }

      .camera-commands code {
        background: #e9ecef;
        padding: 2px 6px;
        border-radius: 3px;
        font-size: 13px;
      }

      .examples {
        background: #fff3cd;
        padding: 15px;
        border-radius: 6px;
        margin-top: 15px;
      }

      .examples h4 {
        margin-bottom: 10px;
        color: #856404;
      }

      .examples ul {
        margin-left: 20px;
      }

      .examples li {
        margin-bottom: 5px;
        color: #856404;
      }

      /* Tasks Management Styles */
      .tasks-container {
        margin-top: 20px;
      }

      .tasks-filters {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
      }

      .tasks-list {
        margin-top: 20px;
      }

      .task-card {
        background: white;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        transition: all 0.3s;
      }

      .task-card:hover {
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .task-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }

      .task-type {
        background: #e9ecef;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        color: #495057;
      }

      .task-status {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: 600;
      }

      .task-status.processing {
        background: #cff4fc;
        color: #055160;
      }

      .task-status.success {
        background: #d1e7dd;
        color: #0f5132;
      }

      .task-status.failed {
        background: #f8d7da;
        color: #842029;
      }

      .task-progress {
        height: 4px;
        background: #e9ecef;
        border-radius: 2px;
        margin: 10px 0;
        overflow: hidden;
      }

      .task-progress-bar {
        height: 100%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        width: 0%;
        transition: width 0.3s;
      }

      .tasks-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 30px;
      }

      .stat-card {
        background: white;
        padding: 20px;
        border-radius: 8px;
        text-align: center;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .stat-card h4 {
        color: #495057;
        margin-bottom: 10px;
        font-size: 14px;
      }

      .stat-value {
        font-size: 24px;
        font-weight: 600;
        color: #667eea;
      }

      /* Pricing Styles */
      .pricing-section {
        background: white;
        border-radius: 12px;
        padding: 25px;
        margin-bottom: 30px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .pricing-section h3 {
        margin-bottom: 20px;
        color: #333;
        font-size: 1.3em;
      }

      .pricing-table {
        width: 100%;
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid #e0e0e0;
      }

      .pricing-row {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        padding: 12px 20px;
        align-items: center;
      }

      .pricing-row:not(:last-child) {
        border-bottom: 1px solid #e0e0e0;
      }

      .pricing-row.header {
        background: #f8f9fa;
        font-weight: 600;
        color: #495057;
      }

      .pricing-row:not(.header):hover {
        background: #f8f9fa;
      }

      .pricing-note {
        margin-top: 10px;
        font-size: 0.9em;
        color: #666;
      }

      /* TTS Styles */
      .range-value {
        text-align: center;
        font-size: 14px;
        color: #666;
        margin-top: 5px;
      }

      input[type='range'] {
        width: 100%;
        height: 8px;
        border-radius: 4px;
        background: #e0e0e0;
        outline: none;
        -webkit-appearance: none;
      }

      input[type='range']::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        cursor: pointer;
        border: 2px solid white;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
      }

      #audioPreview {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        margin-top: 20px;
      }

      #audioPreview audio {
        width: 100%;
        margin-top: 10px;
      }

      /* Add price indicators to forms */
      .price-indicator {
        display: inline-block;
        background: #e9ecef;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.9em;
        color: #495057;
        margin-left: 10px;
      }

      /* Dark theme support */
      @media (prefers-color-scheme: dark) {
        .task-card {
          background: #2d2d2d;
          border-color: #404040;
        }

        .task-type {
          background: #404040;
          color: #e0e0e0;
        }

        .stat-card {
          background: #2d2d2d;
        }

        .stat-card h4 {
          color: #e0e0e0;
        }

        .tasks-filters {
          background: #2d2d2d;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üé• MiniMax Video Generator</h1>
        <p>–¢–µ—Å—Ç–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ Hailuo API</p>
      </div>

      <div class="tabs">
        <button class="tab active" data-tab="t2v">üìù Text to Video</button>
        <button class="tab" data-tab="i2v">üñºÔ∏è Image to Video</button>
        <button class="tab" data-tab="start-end">üé¨ Start & End Frames</button>
        <button class="tab" data-tab="t2i">üé® Text to Image</button>
        <button class="tab" data-tab="demo">‚ö° Quick Demo</button>
        <button class="tab" data-tab="tasks">üìã –ó–∞–¥–∞—á–∏</button>
        <button class="tab" data-tab="pricing">üí∞ –¶–µ–Ω—ã</button>
        <button class="tab" data-tab="tts">üéß Text to Speech</button>
        <button class="tab" data-tab="voice-clone">üé§ Voice Clone</button>
        <button class="tab" data-tab="templates">üìΩÔ∏è Video Templates</button>
        <button class="tab" data-tab="shorts">‚ö° Generate Short</button>
      </div>

      <!-- Text to Speech -->
      <div id="tts" class="tab-content">
        <div class="alert alert-info" style="margin-bottom: 20px">
          <strong>üéß –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏</strong><br />
          –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—É—é —Ä–µ—á—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π 40 —è–∑—ã–∫–æ–≤.
        </div>

        <form id="ttsForm">
          <div class="form-group">
            <label>–¢–µ–∫—Å—Ç –¥–ª—è –æ–∑–≤—É—á–∏–≤–∞–Ω–∏—è</label>
            <textarea
              name="text"
              required
              placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –æ–∑–≤—É—á–∏–≤–∞–Ω–∏—è..."
            ></textarea>
            <div class="hint">
              –î–æ 10,000 —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞, –¥–æ 1–ú –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ.
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>–ú–æ–¥–µ–ª—å</label>
              <select name="model">
                <option value="speech-2.5-hd-preview">HD Preview (–í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ)</option>
                <option value="speech-2.5-turbo-preview">Turbo Preview (40 —è–∑—ã–∫–æ–≤)</option>
                <option value="speech-02-hd">HD (–°—Ç–∞–±–∏–ª—å–Ω–∞—è)</option>
                <option value="speech-02-turbo">Turbo (–°—Ç–∞–±–∏–ª—å–Ω–∞—è)</option>
              </select>
            </div>

            <div class="form-group">
              <label>–ì–æ–ª–æ—Å</label>
              <select name="voice_id">
                <option value="English_expressive_narrator">English Narrator</option>
                <option value="Russian_expressive_narrator">Russian Narrator</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>–°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏</label>
              <input type="range" name="speed" min="0.5" max="2.0" step="0.1" value="1.0" />
              <div class="range-value">1.0</div>
            </div>

            <div class="form-group">
              <label>–ì—Ä–æ–º–∫–æ—Å—Ç—å</label>
              <input type="range" name="volume" min="0.1" max="2.0" step="0.1" value="1.0" />
              <div class="range-value">1.0</div>
            </div>
          </div>

          <div class="form-group">
            <label>–≠—Ñ—Ñ–µ–∫—Ç—ã</label>
            <select name="sound_effects">
              <option value="none">–ë–µ–∑ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤</option>
              <option value="spacious_echo">–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —ç—Ö–æ</option>
              <option value="warm_echo">–¢–µ–ø–ª–æ–µ —ç—Ö–æ</option>
            </select>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>–§–æ—Ä–º–∞—Ç –∞—É–¥–∏–æ</label>
              <select name="format">
                <option value="mp3">MP3</option>
                <option value="wav">WAV</option>
              </select>
            </div>

            <div class="form-group">
              <label>–†–µ–∂–∏–º</label>
              <select name="mode">
                <option value="sync">–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π (–¥–æ 10–ö —Å–∏–º–≤–æ–ª–æ–≤)</option>
                <option value="async">–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π (–¥–æ 1–ú —Å–∏–º–≤–æ–ª–æ–≤)</option>
              </select>
            </div>
          </div>

          <button type="submit" class="btn">üéß –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞—É–¥–∏–æ</button>
        </form>

        <div class="loading" id="ttsLoading">
          <div class="spinner"></div>
          <p>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—É–¥–∏–æ...</p>
        </div>

        <div class="result" id="ttsResult"></div>

        <!-- Preview Player -->
        <div id="audioPreview" style="display: none; margin-top: 20px">
          <h3>üéµ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä:</h3>
          <audio controls style="width: 100%; margin-top: 10px"></audio>
        </div>
      </div>

      <!-- Pricing -->
      <div id="pricing" class="tab-content">
        <div class="alert alert-info" style="margin-bottom: 20px">
          <strong>üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</strong><br />
          –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MiniMax API.
        </div>

        <div class="pricing-section">
          <h3>üé• –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ</h3>
          <div class="pricing-table">
            <div class="pricing-row header">
              <div>–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ</div>
              <div>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</div>
              <div>–¶–µ–Ω–∞</div>
            </div>
            <div class="pricing-row">
              <div>512P</div>
              <div>6 —Å–µ–∫—É–Ω–¥</div>
              <div>$0.10</div>
            </div>
            <div class="pricing-row">
              <div>512P</div>
              <div>10 —Å–µ–∫—É–Ω–¥</div>
              <div>$0.15</div>
            </div>
            <div class="pricing-row">
              <div>768P</div>
              <div>6 —Å–µ–∫—É–Ω–¥</div>
              <div>$0.28</div>
            </div>
            <div class="pricing-row">
              <div>768P</div>
              <div>10 —Å–µ–∫—É–Ω–¥</div>
              <div>$0.56</div>
            </div>
            <div class="pricing-row">
              <div>1080P</div>
              <div>6 —Å–µ–∫—É–Ω–¥</div>
              <div>$0.49</div>
            </div>
          </div>
          <div class="pricing-note">* –¶–µ–Ω—ã —É–∫–∞–∑–∞–Ω—ã –∑–∞ –æ–¥–∏–Ω –≤–∏–¥–µ–æ—Ä–æ–ª–∏–∫ —á–µ—Ä–µ–∑ MiniMax-Hailuo-02</div>
        </div>

        <div class="pricing-section">
          <h3>üé® –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</h3>
          <div class="pricing-table">
            <div class="pricing-row header">
              <div>–ú–æ–¥–µ–ª—å</div>
              <div>–¢–∏–ø</div>
              <div>–¶–µ–Ω–∞</div>
            </div>
            <div class="pricing-row">
              <div>image-01</div>
              <div>–û–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</div>
              <div>$0.0035</div>
            </div>
          </div>
        </div>

        <div class="alert alert-info" style="margin-top: 20px">
          <strong>‚ÑπÔ∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong>
          <ul style="margin-top: 10px">
            <li>–¶–µ–Ω—ã –º–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫—É—Ä—Å–∞ –∏ —Ç–∞—Ä–∏—Ñ–æ–≤ MiniMax</li>
            <li>–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ —É—á–∏—Ç—ã–≤–∞–π—Ç–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–æ/—Ü–µ–Ω–∞</li>
            <li>–î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 768P –≤–º–µ—Å—Ç–æ 1080P</li>
            <li>–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å</li>
          </ul>
        </div>
      </div>

      <!-- Tasks Management -->
      <div id="tasks" class="tab-content">
        <div class="alert alert-info" style="margin-bottom: 20px">
          <strong>üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏</strong><br />
          –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ –∑–∞–¥–∞—á–∞–º–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.
        </div>

        <div class="tasks-container">
          <div class="tasks-filters">
            <div class="form-row">
              <div class="form-group">
                <label>–°—Ç–∞—Ç—É—Å</label>
                <select id="taskStatusFilter">
                  <option value="all">–í—Å–µ –∑–∞–¥–∞—á–∏</option>
                  <option value="processing">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</option>
                  <option value="success">–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ</option>
                  <option value="failed">–° –æ—à–∏–±–∫–∞–º–∏</option>
                </select>
              </div>
              <div class="form-group">
                <label>–¢–∏–ø</label>
                <select id="taskTypeFilter">
                  <option value="all">–í—Å–µ —Ç–∏–ø—ã</option>
                  <option value="t2v">Text to Video</option>
                  <option value="i2v">Image to Video</option>
                  <option value="start-end">Start & End</option>
                  <option value="t2i">Text to Image</option>
                </select>
              </div>
            </div>
          </div>

          <div class="tasks-list" id="tasksList">
            <!-- Tasks will be populated here -->
          </div>
        </div>

        <div class="tasks-stats">
          <div class="stat-card">
            <h4>–ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏</h4>
            <div class="stat-value" id="activeTasksCount">0</div>
          </div>
          <div class="stat-card">
            <h4>–ó–∞–≤–µ—Ä—à–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è</h4>
            <div class="stat-value" id="completedTodayCount">0</div>
          </div>
          <div class="stat-card">
            <h4>–û—à–∏–±–æ–∫ —Å–µ–≥–æ–¥–Ω—è</h4>
            <div class="stat-value" id="failedTodayCount">0</div>
          </div>
        </div>
      </div>

      <!-- Text to Video -->
      <div id="t2v" class="tab-content active">
        <div class="camera-commands">
          <h4>üí° –ö–æ–º–∞–Ω–¥—ã –∫–∞–º–µ—Ä—ã:</h4>
          <p>
            <code>[Push in]</code> <code>[Pull out]</code> <code>[Pan left]</code>
            <code>[Pan right]</code> <code>[Tilt up]</code> <code>[Tilt down]</code>
            <code>[Zoom in]</code> <code>[Zoom out]</code> <code>[Tracking shot]</code>
            <code>[Static shot]</code>
          </p>
        </div>

        <form id="t2vForm">
          <div class="form-group">
            <label>–ü—Ä–æ–º–ø—Ç (–æ–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–µ–æ)</label>
            <textarea
              name="prompt"
              required
              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: A golden retriever puppy playing in the park [Push in] then running towards camera [Tracking shot]"
            >
A cute cat sitting on a windowsill, watching birds outside [Pan right,Zoom in]</textarea
            >
            <div class="hint">
              –ú–∞–∫—Å–∏–º—É–º 2000 —Å–∏–º–≤–æ–ª–æ–≤. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã –∫–∞–º–µ—Ä—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏–µ–º.
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å–µ–∫—É–Ω–¥)</label>
              <select name="duration">
                <option value="6">6 —Å–µ–∫—É–Ω–¥</option>
                <option value="10">10 —Å–µ–∫—É–Ω–¥ (—Ç–æ–ª—å–∫–æ 768P/512P)</option>
              </select>
            </div>

            <div class="form-group">
              <label>–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ</label>
              <select name="resolution" onchange="updatePriceIndicator(this)">
                <option value="1080P" data-price="0.49">1080P (–≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ)</option>
                <option value="768P" data-price="0.28">768P (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ)</option>
                <option value="512P" data-price="0.10">512P (–±—ã—Å—Ç—Ä–æ)</option>
              </select>
              <div class="price-indicator">üí∞ $0.49</div>
            </div>
          </div>

          <div class="form-group">
            <label>–§–æ—Ä–º–∞—Ç –≤–∏–¥–µ–æ</label>
            <select name="aspect_ratio">
              <option value="16:9">üñ•Ô∏è –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ (16:9)</option>
              <option value="9:16">üì± –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ (9:16)</option>
              <option value="1:1">‚¨õ –ö–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ (1:1)</option>
            </select>
          </div>

          <button type="submit" class="btn">üöÄ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–∏–¥–µ–æ</button>
        </form>

        <div class="loading" id="t2vLoading">
          <div class="spinner"></div>
          <p>–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞...</p>
        </div>

        <div class="result" id="t2vResult"></div>
      </div>

      <!-- Image to Video -->
      <div id="i2v" class="tab-content">
        <div class="form-group">
          <label>–í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
          <input
            type="file"
            id="i2vImageFile"
            accept="image/jpeg,image/png,image/webp"
            style="margin-bottom: 10px"
          />
          <div class="hint">–§–æ—Ä–º–∞—Ç—ã: JPG, PNG, WebP. –†–∞–∑–º–µ—Ä < 20MB. –ö–æ—Ä–æ—Ç–∫–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ > 300px.</div>
          <div style="margin-top: 15px; text-align: center" id="i2vPreview"></div>
        </div>

        <div style="text-align: center; margin: 15px 0; color: #999">–∏–ª–∏</div>

        <div class="form-group">
          <label>URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
          <input
            type="url"
            id="i2vImage"
            placeholder="https://example.com/image.jpg"
            value="https://filecdn.minimax.chat/public/fe9d04da-f60e-444d-a2e0-18ae743add33.jpeg"
          />
        </div>

        <form id="i2vForm">
          <div class="form-group">
            <label>–ü—Ä–æ–º–ø—Ç (–æ–ø–∏—Å–∞–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è)</label>
            <textarea
              name="prompt"
              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: The mouse blinks, smiles, and runs toward the camera [Pedestal up,Push in]"
            >
The character smiles and waves at the camera [Tilt up,Zoom in]</textarea
            >
            <div class="hint">–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –û–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –¥–æ–ª–∂–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.</div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å–µ–∫—É–Ω–¥)</label>
              <select name="duration">
                <option value="6">6 —Å–µ–∫—É–Ω–¥</option>
                <option value="10">10 —Å–µ–∫—É–Ω–¥</option>
              </select>
            </div>

            <div class="form-group">
              <label>–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ</label>
              <select name="resolution">
                <option value="1080P">1080P</option>
                <option value="768P">768P</option>
                <option value="512P">512P</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label>–§–æ—Ä–º–∞—Ç –≤–∏–¥–µ–æ</label>
            <select name="aspect_ratio">
              <option value="16:9">üñ•Ô∏è –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ (16:9)</option>
              <option value="9:16">üì± –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ (9:16)</option>
              <option value="1:1">‚¨õ –ö–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ (1:1)</option>
            </select>
          </div>

          <button type="submit" class="btn">üöÄ –ê–Ω–∏–º–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</button>
        </form>

        <div class="loading" id="i2vLoading">
          <div class="spinner"></div>
          <p>–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞...</p>
        </div>

        <div class="result" id="i2vResult"></div>
      </div>

      <!-- Start & End Frames -->
      <div id="start-end" class="tab-content">
        <div class="form-row">
          <div class="form-group">
            <label>–ü–µ—Ä–≤—ã–π –∫–∞–¥—Ä</label>
            <input
              type="file"
              id="startImageFile"
              accept="image/jpeg,image/png,image/webp"
              style="margin-bottom: 10px"
            />
            <div style="margin-top: 10px; text-align: center" id="startPreview"></div>
            <div style="text-align: center; margin: 10px 0; color: #999; font-size: 12px">–∏–ª–∏</div>
            <input
              type="url"
              id="startImage"
              placeholder="https://example.com/start.jpg"
              value="https://filecdn.minimax.chat/public/fe9d04da-f60e-444d-a2e0-18ae743add33.jpeg"
            />
          </div>

          <div class="form-group">
            <label>–ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–∞–¥—Ä</label>
            <input
              type="file"
              id="endImageFile"
              accept="image/jpeg,image/png,image/webp"
              style="margin-bottom: 10px"
            />
            <div style="margin-top: 10px; text-align: center" id="endPreview"></div>
            <div style="text-align: center; margin: 10px 0; color: #999; font-size: 12px">–∏–ª–∏</div>
            <input
              type="url"
              id="endImage"
              placeholder="https://example.com/end.jpg"
              value="https://filecdn.minimax.chat/public/97b7cd08-764e-4b8b-a7bf-87a0bd898575.jpeg"
            />
          </div>
        </div>

        <form id="startEndForm">
          <div class="form-group">
            <label>–ü—Ä–æ–º–ø—Ç (–æ–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∞)</label>
            <textarea
              name="prompt"
              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Smooth transition from childhood to adulthood [Pan right,Pedestal up]"
            >
A smooth transition between the two scenes [Pan right,Zoom in]</textarea
            >
            <div class="hint">–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –û–ø–∏—Å—ã–≤–∞–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏.</div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å–µ–∫—É–Ω–¥)</label>
              <select name="duration">
                <option value="6">6 —Å–µ–∫—É–Ω–¥</option>
                <option value="10">10 —Å–µ–∫—É–Ω–¥ (—Ç–æ–ª—å–∫–æ 768P)</option>
              </select>
            </div>

            <div class="form-group">
              <label>–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ</label>
              <select name="resolution">
                <option value="1080P">1080P</option>
                <option value="768P">768P</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label>–§–æ—Ä–º–∞—Ç –≤–∏–¥–µ–æ</label>
            <select name="aspect_ratio">
              <option value="16:9">üñ•Ô∏è –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ (16:9)</option>
              <option value="9:16">üì± –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ (9:16)</option>
              <option value="1:1">‚¨õ –ö–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ (1:1)</option>
            </select>
          </div>

          <button type="submit" class="btn">üöÄ –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥</button>
        </form>

        <div class="loading" id="startEndLoading">
          <div class="spinner"></div>
          <p>–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞...</p>
        </div>

        <div class="result" id="startEndResult"></div>
      </div>

      <!-- Text to Image -->
      <div id="t2i" class="tab-content">
        <div class="alert alert-info" style="margin-bottom: 20px">
          <strong>üé® –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</strong><br />
          –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –æ–ø–∏—Å–∞–Ω–∏–π. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ
          —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π.
        </div>

        <form id="t2iForm">
          <div class="form-group">
            <label>–ü—Ä–æ–º–ø—Ç (–æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)</label>
            <textarea
              name="prompt"
              required
              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: A serene mountain landscape at sunset with vibrant orange and purple sky, photorealistic, 8k"
            >
A man in a white t-shirt, full-body, standing front view, outdoors, with the Venice Beach sign in the background, Los Angeles. Fashion photography in 90s documentary style, film grain, photorealistic.</textarea
            >
            <div class="hint">
              –ú–∞–∫—Å–∏–º—É–º 1500 —Å–∏–º–≤–æ–ª–æ–≤. –ë—É–¥—å—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ã –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã –¥–ª—è –ª—É—á—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>–§–æ—Ä–º–∞—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
              <select name="aspect_ratio">
                <option value="1:1">‚¨õ –ö–≤–∞–¥—Ä–∞—Ç (1:1) - 1024x1024</option>
                <option value="16:9">üñ•Ô∏è –®–∏—Ä–æ–∫–∏–π (16:9) - 1280x720</option>
                <option value="4:3">üì∫ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π (4:3) - 1152x864</option>
                <option value="3:2">üì∑ –§–æ—Ç–æ (3:2) - 1248x832</option>
                <option value="2:3">üì± –ü–æ—Ä—Ç—Ä–µ—Ç (2:3) - 832x1248</option>
                <option value="3:4">üì± –ü–æ—Ä—Ç—Ä–µ—Ç+ (3:4) - 864x1152</option>
                <option value="9:16">üì± –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π (9:16) - 720x1280</option>
                <option value="21:9">üé¨ –£–ª—å—Ç—Ä–∞—à–∏—Ä–æ–∫–∏–π (21:9) - 1344x576</option>
              </select>
            </div>

            <div class="form-group">
              <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</label>
              <select name="n">
                <option value="1">1 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</option>
                <option value="2">2 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</option>
                <option value="3" selected>3 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</option>
                <option value="4">4 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</option>
                <option value="5">5 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</option>
                <option value="6">6 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</option>
                <option value="9">9 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Seed (–¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏)</label>
              <input type="number" name="seed" placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ" />
              <div class="hint">
                –û–¥–∏–Ω–∞–∫–æ–≤—ã–π seed —Å–æ–∑–¥–∞—ë—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏ —Ç–µ—Ö –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö
              </div>
            </div>

            <div class="form-group">
              <label>–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–∞</label>
              <select name="prompt_optimizer">
                <option value="false">–í—ã–∫–ª—é—á–µ–Ω–∞ (—Ç–æ—á–Ω—ã–π –ø—Ä–æ–º–ø—Ç)</option>
                <option value="true">–í–∫–ª—é—á–µ–Ω–∞ (AI —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–º–ø—Ç)</option>
              </select>
            </div>
          </div>

          <button type="submit" class="btn">üé® –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</button>
        </form>

        <div class="loading" id="t2iLoading">
          <div class="spinner"></div>
          <p>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...</p>
        </div>

        <div class="result" id="t2iResult"></div>
      </div>

      <!-- Quick Demo -->
      <div id="demo" class="tab-content">
        <div class="alert alert-info">
          <strong>‚ÑπÔ∏è –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</strong><br />
          –≠—Ç–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API.
        </div>

        <div class="form-group">
          <button class="btn demo-btn" data-demo="t2i" style="margin-bottom: 15px">
            üé® Demo: Text to Image (—è–ø–æ–Ω—Å–∫–∏–π —Å–∞–¥)
          </button>
          <button class="btn demo-btn" data-demo="t2v" style="margin-bottom: 15px">
            üìù Demo: Text to Video (—â–µ–Ω–æ–∫ —É –ø—Ä–∏–ª–∞–≤–∫–∞)
          </button>
          <button class="btn demo-btn" data-demo="i2v" style="margin-bottom: 15px">
            üñºÔ∏è Demo: Image to Video (–º—ã—à–∫–∞ –±–µ–∂–∏—Ç)
          </button>
          <button class="btn demo-btn" data-demo="start-end">
            üé¨ Demo: Start & End (–¥–µ–≤–æ—á–∫–∞ —Ä–∞—Å—Ç–µ—Ç)
          </button>
        </div>

        <div class="examples">
          <h4>üìö –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–º–ø—Ç–æ–≤:</h4>
          <ul>
            <li>A corgi pranks his friend, then redeems himself [Tracking shot]</li>
            <li>Beautiful sunset over mountains [Pan right,Pedestal down]</li>
            <li>A dancer spins gracefully [Push in], then bows [Static shot]</li>
            <li>A cat jumps on the table [Pan left,Pedestal up]</li>
          </ul>
        </div>

        <div class="loading" id="demoLoading">
          <div class="spinner"></div>
          <p>–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞...</p>
        </div>

        <div class="result" id="demoResult"></div>
      </div>

      <!-- Voice Clone -->
      <div id="voice-clone" class="tab-content">
        <div class="alert alert-info" style="margin-bottom: 20px">
          <strong>üé§ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–∞</strong><br />
          –°–æ–∑–¥–∞–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –≥–æ–ª–æ—Å –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞—É–¥–∏–æ–∑–∞–ø–∏—Å–∏. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è mp3, m4a, wav
          —Ñ–æ—Ä–º–∞—Ç—ã.
        </div>

        <form id="voiceCloneForm">
          <div class="form-group">
            <label
              >–ò—Å—Ö–æ–¥–Ω–æ–µ –∞—É–¥–∏–æ –¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
              <span class="hint">(10 —Å–µ–∫ - 5 –º–∏–Ω, –¥–æ 20 –ú–ë)</span></label
            >
            <input type="file" name="sourceAudio" accept=".mp3,.m4a,.wav" required />
            <div class="hint">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞—É–¥–∏–æ–∑–∞–ø–∏—Å—å –≥–æ–ª–æ—Å–∞, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ç–∏—Ç–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å.</div>
          </div>

          <div class="form-group">
            <label>–ü—Ä–∏–º–µ—Ä –∞—É–¥–∏–æ <span class="hint">(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–æ 8 —Å–µ–∫)</span></label>
            <input type="file" name="promptAudio" accept=".mp3,.m4a,.wav" />
            <div class="hint">–ö–æ—Ä–æ—Ç–∫–∏–π –ø—Ä–∏–º–µ—Ä –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.</div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>ID –≥–æ–ª–æ—Å–∞</label>
              <input type="text" name="voiceId" placeholder="my_custom_voice_1" required />
              <div class="hint">–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.</div>
            </div>

            <div class="form-group">
              <label>–ú–æ–¥–µ–ª—å</label>
              <select name="model">
                <option value="speech-2.5-hd-preview">HD Preview (–í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ)</option>
                <option value="speech-02-hd">HD (–°—Ç–∞–±–∏–ª—å–Ω–∞—è)</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label>–û–ø–∏—Å–∞–Ω–∏–µ –≥–æ–ª–æ—Å–∞ (–¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)</label>
            <textarea
              name="promptText"
              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –≠—Ç–æ –ø—Ä–∏—è—Ç–Ω—ã–π –¥–µ—Ç—Å–∫–∏–π –≥–æ–ª–æ—Å —Å –º—è–≥–∫–∏–º–∏ –∏–Ω—Ç–æ–Ω–∞—Ü–∏—è–º–∏..."
            >
–≠—Ç–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∏ –ø—Ä–∏—è—Ç–Ω—ã–π –≥–æ–ª–æ—Å.</textarea
            >
          </div>

          <div class="form-group">
            <label>–¢–µ—Å—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç</label>
            <textarea name="text" required>
–õ–µ–≥–∫–∏–π –≤–µ—Ç–µ—Ä–æ–∫ –ø—Ä–æ–Ω–æ—Å–∏—Ç—Å—è –Ω–∞–¥ –º—è–≥–∫–æ–π —Ç—Ä–∞–≤–æ–π, –ø—Ä–∏–Ω–æ—Å—è —Å —Å–æ–±–æ–π —Å–≤–µ–∂–∏–π –∞—Ä–æ–º–∞—Ç –∏ –ø–µ–Ω–∏–µ –ø—Ç–∏—Ü.</textarea
            >
            <div class="hint">–≠—Ç–æ—Ç —Ç–µ–∫—Å—Ç –±—É–¥–µ—Ç –æ–∑–≤—É—á–µ–Ω –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –≥–æ–ª–æ—Å–æ–º –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.</div>
          </div>

          <button type="submit" class="btn">üé§ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –≥–æ–ª–æ—Å</button>
        </form>

        <div class="loading" id="voiceCloneLoading">
          <div class="spinner"></div>
          <p>–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–∞...</p>
        </div>

        <div class="result" id="voiceCloneResult"></div>

        <!-- Preview Players -->
        <div id="clonePreview" style="display: none; margin-top: 20px">
          <div style="margin-bottom: 20px">
            <h3>üéµ –ò—Å—Ö–æ–¥–Ω–æ–µ –∞—É–¥–∏–æ:</h3>
            <audio controls style="width: 100%; margin-top: 10px" id="sourcePreview"></audio>
          </div>

          <div style="margin-bottom: 20px">
            <h3>üéµ –ü—Ä–∏–º–µ—Ä –∞—É–¥–∏–æ:</h3>
            <audio controls style="width: 100%; margin-top: 10px" id="promptPreview"></audio>
          </div>

          <div>
            <h3>üéµ –†–µ–∑—É–ª—å—Ç–∞—Ç –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:</h3>
            <audio controls style="width: 100%; margin-top: 10px" id="resultPreview"></audio>
          </div>
        </div>
      </div>

      <!-- Video Templates -->
      <div id="templates" class="tab-content">
        <div class="alert alert-info" style="margin-bottom: 20px">
          <strong>üìΩÔ∏è –í–∏–¥–µ–æ –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤</strong><br />
          –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–∏–¥–µ–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥–æ—Ç–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—è —Ç–µ–∫—Å—Ç,
          –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –¥—Ä—É–≥–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã.
        </div>

        <!-- Template Browser -->
        <div class="form-group" style="margin-bottom: 30px">
          <label>–î–æ—Å—Ç—É–ø–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã</label>
          <div
            id="templateGallery"
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
              gap: 20px;
              margin-top: 15px;
            "
          >
            <!-- Templates will be loaded here -->
          </div>
        </div>

        <!-- Template Generator Form -->
        <form id="templateForm" style="display: none">
          <div class="alert alert-info">
            <strong>‚ÑπÔ∏è –í—ã–±—Ä–∞–Ω —à–∞–±–ª–æ–Ω:</strong>
            <span id="selectedTemplateName">–ù–µ—Ç</span>
          </div>

          <div id="templateInputs">
            <!-- Dynamic inputs will be added here based on template -->
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ</label>
              <select name="resolution">
                <option value="1080P">1080P (–≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ)</option>
                <option value="768P">768P (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ)</option>
                <option value="512P">512P (–±—ã—Å—Ç—Ä–æ)</option>
              </select>
            </div>

            <div class="form-group">
              <label>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
              <select name="priority">
                <option value="normal">–û–±—ã—á–Ω—ã–π</option>
                <option value="high">–í—ã—Å–æ–∫–∏–π</option>
              </select>
            </div>
          </div>

          <button type="submit" class="btn">üöÄ –°–æ–∑–¥–∞—Ç—å –≤–∏–¥–µ–æ</button>
        </form>

        <!-- Template Preview -->
        <div id="templatePreview" style="display: none; margin-top: 30px">
          <h3>üëÄ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —à–∞–±–ª–æ–Ω–∞:</h3>
          <div style="position: relative; margin-top: 15px">
            <video
              id="previewVideo"
              style="width: 100%; max-width: 600px; border-radius: 8px"
              loop
              muted
            ></video>
            <div
              style="
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                color: white;
                font-size: 48px;
                opacity: 0;
                transition: opacity 0.3s;
              "
              id="playIcon"
            >
              ‚ñ∂Ô∏è
            </div>
          </div>
        </div>

        <div class="loading" id="templateLoading">
          <div class="spinner"></div>
          <p>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ...</p>
        </div>

        <div class="result" id="templateResult"></div>
      </div>

      <!-- 1-click Generate Short -->
      <div id="shorts" class="tab-content">
        <div class="alert alert-info" style="margin-bottom: 20px">
          <strong>‚ö° 1-Click Generate Short</strong><br />
          –ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –≤–∏–¥–µ–æ: —Å—Ü–µ–Ω–∞—Ä–∏–π ‚Üí –∞—Å—Å–µ—Ç—ã ‚Üí –≥–æ–ª–æ—Å ‚Üí —Å–±–æ—Ä–∫–∞ ‚Üí —ç–∫—Å–ø–æ—Ä—Ç.
        </div>

        <form id="shortForm">
          <div class="form-group">
            <label>–¢–µ–º–∞ / –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è</label>
            <input
              type="text"
              name="topic"
              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Cute puppy helps at the food stall"
              required
            />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>–Ø–∑—ã–∫ —Å—Ü–µ–Ω–∞—Ä–∏—è</label>
              <select name="language">
                <option value="en">English</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                <option value="es">Espa√±ol</option>
              </select>
            </div>

            <div class="form-group">
              <label>–†–µ–∂–∏–º</label>
              <select name="mode">
                <option value="t2v">Text ‚Üí Video (T2V)</option>
                <option value="i2v">Image ‚Üí Video (I2V)</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>–ì–æ–ª–æ—Å (TTS)</label>
              <select name="voice_id">
                <option value="English_expressive_narrator">English (Narrator)</option>
                <option value="Russian_expressive_narrator">–†—É—Å—Å–∫–∏–π (Narrator)</option>
              </select>
            </div>

            <div class="form-group">
              <label>–°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏</label>
              <input type="range" name="speed" min="0.7" max="1.6" step="0.1" value="1.0" />
              <div class="range-value">1.0</div>
            </div>
          </div>

          <div class="form-group">
            <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ –±–∏—Ç–∞ (—Å–µ–∫)</label>
            <select name="beat_duration">
              <option value="5">5</option>
              <option value="6" selected>6</option>
              <option value="8">8</option>
            </select>
          </div>

          <button type="submit" class="btn">‚ö° Generate Short</button>
        </form>

        <div class="loading" id="shortsLoading">
          <div class="spinner"></div>
          <p>–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–∞–π–ø–ª–∞–π–Ω...</p>
        </div>

        <div class="result" id="shortsResult"></div>

        <div
          id="shortsLog"
          style="
            margin-top: 16px;
            font-family: monospace;
            font-size: 13px;
            white-space: pre-wrap;
            background: #fff;
            padding: 12px;
            border-radius: 8px;
            display: none;
          "
        ></div>
      </div>
    </div>

    <script src="/js/main.js"></script>
    <script src="/js/tts.js"></script>
    <script src="/js/voice-clone.js"></script>
    <script src="/js/templates.js"></script>
    <script src="/js/shorts.js"></script>

    <script>
      // Declare API_BASE variable
      const API_BASE = 'http://localhost:3000'

      // Templates interaction
      document.addEventListener('DOMContentLoaded', async () => {
        // Initialize template browser
        try {
          const response = await fetch(`${API_BASE}/api/video-templates`)
          const templates = await response.json()
          displayTemplates(templates)
        } catch (error) {
          console.error('Failed to load templates:', error)
        }

        // Setup template preview interactions
        const previewVideo = document.getElementById('previewVideo')
        const playIcon = document.getElementById('playIcon')

        if (previewVideo) {
          previewVideo.addEventListener('mouseover', () => {
            previewVideo.play()
            playIcon.style.opacity = '0'
          })

          previewVideo.addEventListener('mouseout', () => {
            previewVideo.pause()
            playIcon.style.opacity = '1'
          })

          previewVideo.addEventListener('play', () => {
            playIcon.style.opacity = '0'
          })

          previewVideo.addEventListener('pause', () => {
            playIcon.style.opacity = '1'
          })
        }

        // Setup template form submission
        const templateForm = document.getElementById('templateForm')
        if (templateForm) {
          templateForm.addEventListener('submit', handleTemplateSubmit)
        }
      })

      function displayTemplates(templates) {
        const gallery = document.getElementById('templateGallery')
        if (!gallery) return

        gallery.innerHTML = templates
          .map(
            (template) => `
                <div class="template-card" style="border: 1px solid #e0e0e0; border-radius: 8px; overflow: hidden; cursor: pointer;"
                     onclick="selectTemplate('${template.id}')">
                    <div style="position: relative;">
                        <img src="${template.thumbnail}" 
                             alt="${template.name}"
                             style="width: 100%; height: 158px; object-fit: cover;">
                        <div style="position: absolute; bottom: 0; left: 0; right: 0; 
                                  background: rgba(0,0,0,0.7); color: white; padding: 8px;">
                            ${template.name}
                        </div>
                    </div>
                    <div style="padding: 12px;">
                        <p style="margin: 0; font-size: 14px; color: #666;">
                            ${template.description}
                        </p>
                    </div>
                </div>
            `
          )
          .join('')
      }

      async function selectTemplate(templateId) {
        try {
          const response = await fetch(`${API_BASE}/api/video-templates/${templateId}`)
          const template = await response.json()

          // Show template form
          const templateForm = document.getElementById('templateForm')
          templateForm.style.display = 'block'

          // Update template name
          document.getElementById('selectedTemplateName').textContent = template.name

          // Generate input fields
          const inputsContainer = document.getElementById('templateInputs')
          inputsContainer.innerHTML = generateInputFields(template.inputs)

          // Setup preview
          const previewContainer = document.getElementById('templatePreview')
          const previewVideo = document.getElementById('previewVideo')

          previewContainer.style.display = 'block'
          previewVideo.src = template.preview_url
          previewVideo.poster = template.thumbnail

          // Store template ID
          templateForm.dataset.templateId = templateId

          // Scroll to form
          templateForm.scrollIntoView({ behavior: 'smooth' })
        } catch (error) {
          console.error('Failed to load template details:', error)
        }
      }

      function generateInputFields(inputs) {
        return inputs
          .map((input) => {
            let inputHtml = ''

            switch (input.type) {
              case 'text':
              case 'textarea':
                inputHtml = `
                            <div class="form-group">
                                <label>${input.label}</label>
                                <${input.type === 'textarea' ? 'textarea' : 'input type="text"'} 
                                    name="${input.id}"
                                    placeholder="${input.placeholder || ''}"
                                    ${input.required ? 'required' : ''}
                                ></${input.type === 'textarea' ? 'textarea' : 'input'}>
                                ${input.hint ? `<div class="hint">${input.hint}</div>` : ''}
                            </div>`
                break

              case 'image':
                inputHtml = `
                            <div class="form-group">
                                <label>${input.label}</label>
                                <input type="file" 
                                       name="${input.id}" 
                                       accept="image/*"
                                       ${input.required ? 'required' : ''}>
                                ${input.hint ? `<div class="hint">${input.hint}</div>` : ''}
                                <div style="margin-top: 10px; text-align: center;" id="${input.id}Preview"></div>
                            </div>`
                break

              case 'select':
                inputHtml = `
                            <div class="form-group">
                                <label>${input.label}</label>
                                <select name="${input.id}" ${input.required ? 'required' : ''}>
                                    ${input.options
                                      .map(
                                        (opt) =>
                                          `<option value="${opt.value}">${opt.label}</option>`
                                      )
                                      .join('')}
                                </select>
                                ${input.hint ? `<div class="hint">${input.hint}</div>` : ''}
                            </div>`
                break
            }

            return inputHtml
          })
          .join('')
      }

      async function handleTemplateSubmit(e) {
        e.preventDefault()

        const form = e.target
        const templateId = form.dataset.templateId
        const formData = new FormData(form)

        showLoading('templateLoading')

        try {
          // Convert file inputs to base64
          const inputs = {}
          for (let [key, value] of formData.entries()) {
            if (value instanceof File && value.size > 0) {
              inputs[key] = await fileToBase64(value)
            } else {
              inputs[key] = value
            }
          }

          const data = {
            templateId,
            inputs,
            resolution: formData.get('resolution'),
            priority: formData.get('priority'),
          }

          const response = await fetch(`${API_BASE}/api/video-template`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data),
          })

          const result = await response.json()
          hideLoading('templateLoading')
          showResult('templateResult', result, response.ok)

          // Start polling if task was created
          if (response.ok && result.task_id) {
            pollJobStatus(result.task_id, 'templateResult')
          }
        } catch (error) {
          hideLoading('templateLoading')
          showResult('templateResult', { error: error.message }, false)
        }
      }

      // Helper function to convert image file to base64
      function fileToBase64(file) {
        return new Promise((resolve, reject) => {
          const reader = new FileReader()
          reader.onload = () => resolve(reader.result)
          reader.onerror = reject
          reader.readAsDataURL(file)
        })
      }

      // Image preview helper
      function showImagePreview(file, previewElementId) {
        const preview = document.getElementById(previewElementId)
        const reader = new FileReader()
        reader.onload = (e) => {
          preview.innerHTML = `<img src="${e.target.result}" style="max-width: 300px; max-height: 200px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">`
        }
        reader.readAsDataURL(file)
      }

      // Setup file input handlers for Image to Video
      document.getElementById('i2vImageFile').addEventListener('change', (e) => {
        if (e.target.files[0]) {
          showImagePreview(e.target.files[0], 'i2vPreview')
          document.getElementById('i2vImage').value = '' // Clear URL input
        }
      })

      // Setup file input handlers for Start & End
      document.getElementById('startImageFile').addEventListener('change', (e) => {
        if (e.target.files[0]) {
          showImagePreview(e.target.files[0], 'startPreview')
          document.getElementById('startImage').value = '' // Clear URL input
        }
      })

      document.getElementById('endImageFile').addEventListener('change', (e) => {
        if (e.target.files[0]) {
          showImagePreview(e.target.files[0], 'endPreview')
          document.getElementById('endImage').value = '' // Clear URL input
        }
      })

      function switchTab(e, tabName) {
        // Prevent default button behavior
        e.preventDefault()

        // Hide all tabs
        const tabContents = document.querySelectorAll('.tab-content')
        const tabs = document.querySelectorAll('.tab')

        tabContents.forEach((content) => {
          content.style.display = 'none'
          content.classList.remove('active')
        })

        tabs.forEach((tab) => {
          tab.classList.remove('active')
        })

        // Show selected tab
        const selectedTab = document.getElementById(tabName)
        if (selectedTab) {
          selectedTab.style.display = 'block'
          selectedTab.classList.add('active')
          e.currentTarget.classList.add('active')
        } else {
          console.error(`Tab with id '${tabName}' not found`)
        }
      }
      function showResult(elementId, data, success = true) {
        const resultDiv = document.getElementById(elementId)
        const alertClass = success ? 'alert-success' : 'alert-error'
        const icon = success ? '‚úÖ' : '‚ùå'

        let html = `<div class="alert ${alertClass}">
                <strong>${icon} ${success ? '–ó–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–µ–Ω!' : '–û—à–∏–±–∫–∞!'}</strong>
            </div>`

        if (success && data.task_id) {
          html += `
                    <div class="alert alert-info">
                        <strong>üéØ Task ID:</strong> ${data.task_id}<br>
                        <strong>‚è±Ô∏è –°—Ç–∞—Ç—É—Å:</strong> –í–∏–¥–µ–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è... –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–¥–µ—Ç –Ω–∞ callback.<br>
                        <strong>üìÅ –°–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤:</strong> ./out/
                    </div>
                `
        }

        // Show video player if public_url is available
        if (data.public_url) {
          html += `
                    <div style="margin-top: 20px;">
                        <h3>üé¨ –ì–æ—Ç–æ–≤–æ–µ –≤–∏–¥–µ–æ:</h3>
                        <video controls style="width:100%; max-width:800px; margin-top:12px; border-radius:8px;" src="${data.public_url}"></video>
                    </div>
                `
        }

        html += '<h3>–û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:</h3>'
        html += `<pre>${JSON.stringify(data, null, 2)}</pre>`

        resultDiv.innerHTML = html
        resultDiv.classList.add('show')
      }

      function hideLoading(loadingId) {
        document.getElementById(loadingId).classList.remove('show')
      }

      function showLoading(loadingId) {
        document.getElementById(loadingId).classList.add('show')
      }

      // Poll job status until completion
      async function pollJobStatus(taskId, resultElementId) {
        const pollInterval = 3000 // 3 seconds
        const maxAttempts = 200 // 10 minutes max (200 * 3s)
        let attempts = 0

        const poll = async () => {
          try {
            const response = await fetch(`${API_BASE}/api/job/${taskId}`)
            const job = await response.json()

            attempts++

            // Update UI with current status
            const resultDiv = document.getElementById(resultElementId)
            const statusInfo = resultDiv.querySelector('.alert-info')

            if (statusInfo) {
              let statusText = '‚è±Ô∏è –°—Ç–∞—Ç—É—Å: '
              if (job.status === 'processing') {
                statusText += `–û–±—Ä–∞–±–æ—Ç–∫–∞... (–ø–æ–ø—ã—Ç–∫–∞ ${attempts}/${maxAttempts})`
              } else if (job.status === 'success') {
                statusText += '‚úÖ –ì–æ—Ç–æ–≤–æ!'
              } else if (job.status === 'failed') {
                statusText += '‚ùå –û—à–∏–±–∫–∞'
              } else {
                statusText += '–û–∂–∏–¥–∞–Ω–∏–µ...'
              }

              // Update status line
              const lines = statusInfo.innerHTML.split('<br>')
              lines[1] = `<strong>${statusText}</strong>`
              statusInfo.innerHTML = lines.join('<br>')
            }

            // Check if completed
            if (job.status === 'success' || job.status === 'failed') {
              showResult(resultElementId, job, job.status === 'success')
              return
            }

            // Continue polling if not max attempts
            if (attempts < maxAttempts) {
              setTimeout(poll, pollInterval)
            } else {
              console.log('Max polling attempts reached')
            }
          } catch (error) {
            console.error('Polling error:', error)
            if (attempts < maxAttempts) {
              setTimeout(poll, pollInterval)
            }
          }
        }

        // Start polling
        setTimeout(poll, pollInterval)
      }

      // Text to Video form
      document.getElementById('t2vForm').addEventListener('submit', async (e) => {
        e.preventDefault()
        const formData = new FormData(e.target)
        const data = {
          prompt: formData.get('prompt'),
          duration: parseInt(formData.get('duration')),
          resolution: formData.get('resolution'),
          aspect_ratio: formData.get('aspect_ratio'),
          model: 'MiniMax-Hailuo-02',
        }

        showLoading('t2vLoading')

        try {
          const response = await fetch(`${API_BASE}/api/generate-text-video`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data),
          })

          const result = await response.json()
          hideLoading('t2vLoading')
          showResult('t2vResult', result, response.ok)

          // Start polling for job status if task was created
          if (response.ok && result.task_id) {
            pollJobStatus(result.task_id, 't2vResult')
          }
        } catch (error) {
          hideLoading('t2vLoading')
          showResult('t2vResult', { error: error.message }, false)
        }
      })

      // Image to Video form
      document.getElementById('i2vForm').addEventListener('submit', async (e) => {
        e.preventDefault()
        const formData = new FormData(e.target)

        showLoading('i2vLoading')

        try {
          // Check if file or URL is provided
          const fileInput = document.getElementById('i2vImageFile')
          let imageSource

          if (fileInput.files[0]) {
            // Convert file to base64
            imageSource = await fileToBase64(fileInput.files[0])
          } else {
            // Use URL
            imageSource = document.getElementById('i2vImage').value
          }

          if (!imageSource) {
            throw new Error('–í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ URL')
          }

          const data = {
            first_frame_image: imageSource,
            prompt: formData.get('prompt'),
            duration: parseInt(formData.get('duration')),
            resolution: formData.get('resolution'),
            aspect_ratio: formData.get('aspect_ratio'),
            model: 'MiniMax-Hailuo-02',
          }

          const response = await fetch(`${API_BASE}/api/generate-image-video`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data),
          })

          const result = await response.json()
          hideLoading('i2vLoading')
          showResult('i2vResult', result, response.ok)

          // Start polling for job status if task was created
          if (response.ok && result.task_id) {
            pollJobStatus(result.task_id, 'i2vResult')
          }
        } catch (error) {
          hideLoading('i2vLoading')
          showResult('i2vResult', { error: error.message }, false)
        }
      })

      // Start & End form
      document.getElementById('startEndForm').addEventListener('submit', async (e) => {
        e.preventDefault()
        const formData = new FormData(e.target)

        showLoading('startEndLoading')

        try {
          // Get first frame (file or URL)
          const startFileInput = document.getElementById('startImageFile')
          let startImageSource

          if (startFileInput.files[0]) {
            startImageSource = await fileToBase64(startFileInput.files[0])
          } else {
            startImageSource = document.getElementById('startImage').value
          }

          // Get last frame (file or URL)
          const endFileInput = document.getElementById('endImageFile')
          let endImageSource

          if (endFileInput.files[0]) {
            endImageSource = await fileToBase64(endFileInput.files[0])
          } else {
            endImageSource = document.getElementById('endImage').value
          }

          if (!startImageSource || !endImageSource) {
            throw new Error('–í—ã–±–µ—Ä–∏—Ç–µ –æ–±–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ –∏—Ö URL')
          }

          const data = {
            first_frame_image: startImageSource,
            last_frame_image: endImageSource,
            prompt: formData.get('prompt'),
            duration: parseInt(formData.get('duration')),
            resolution: formData.get('resolution'),
            aspect_ratio: formData.get('aspect_ratio'),
            model: 'MiniMax-Hailuo-02',
          }

          const response = await fetch(`${API_BASE}/api/generate-start-end-video`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data),
          })

          const result = await response.json()
          hideLoading('startEndLoading')
          showResult('startEndResult', result, response.ok)

          // Start polling for job status if task was created
          if (response.ok && result.task_id) {
            pollJobStatus(result.task_id, 'startEndResult')
          }
        } catch (error) {
          hideLoading('startEndLoading')
          showResult('startEndResult', { error: error.message }, false)
        }
      })

      // Text to Image form
      document.getElementById('t2iForm').addEventListener('submit', async (e) => {
        e.preventDefault()
        const formData = new FormData(e.target)

        const data = {
          prompt: formData.get('prompt'),
          aspect_ratio: formData.get('aspect_ratio'),
          n: parseInt(formData.get('n')),
          prompt_optimizer: formData.get('prompt_optimizer') === 'true',
          model: 'image-01',
          response_format: 'url',
        }

        // Add seed if provided
        const seed = formData.get('seed')
        if (seed && seed.trim() !== '') {
          data.seed = parseInt(seed)
        }

        showLoading('t2iLoading')

        try {
          const response = await fetch(`${API_BASE}/api/generate-image`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data),
          })

          const result = await response.json()
          hideLoading('t2iLoading')

          // Show result with images
          showImageResult('t2iResult', result, response.ok)
        } catch (error) {
          hideLoading('t2iLoading')

          // Try to parse error message for better display
          let errorMessage = error.message
          try {
            const errorData = JSON.parse(error.message)
            if (errorData.error) errorMessage = errorData.error
          } catch (e) {
            // Keep original error message
          }

          showResult(
            't2iResult',
            {
              error: errorMessage,
              hint: '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã: –Ω–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á, –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ image generation, –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –±–∞–ª–∞–Ω—Å–æ–º.',
            },
            false
          )
        }
      })

      // Special result display for images
      function showImageResult(elementId, data, success = true) {
        const resultDiv = document.getElementById(elementId)
        const alertClass = success ? 'alert-success' : 'alert-error'
        const icon = success ? '‚úÖ' : '‚ùå'

        let html = `<div class="alert ${alertClass}">
                <strong>${icon} ${success ? '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã!' : '–û—à–∏–±–∫–∞!'}</strong>
            </div>`

        // Display images if available
        if (success && data.data && data.data.image_urls) {
          const imageUrls = data.data.image_urls
          const metadata = data.metadata || {}

          html += `
                    <div class="alert alert-info">
                        <strong>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</strong><br>
                        <strong>‚úÖ –£—Å–ø–µ—à–Ω–æ:</strong> ${metadata.success_count || imageUrls.length}<br>
                        <strong>‚ùå –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:</strong> ${metadata.failed_count || 0}<br>
                        <strong>üÜî Trace ID:</strong> ${data.id || 'N/A'}
                    </div>
                `

          html += `<div style="margin-top: 20px;">
                    <h3>üñºÔ∏è –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin-top: 15px;">`

          imageUrls.forEach((url, index) => {
            html += `
                        <div style="border: 2px solid #e0e0e0; border-radius: 8px; overflow: hidden;">
                            <img src="${url}" style="width: 100%; display: block;" alt="Generated image ${index + 1}">
                            <div style="padding: 10px; background: #f8f9fa; text-align: center;">
                                <a href="${url}" target="_blank" class="btn" style="width: auto; padding: 8px 16px; font-size: 14px; margin-top: 0;">
                                    üì• –°–∫–∞—á–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ${index + 1}
                                </a>
                            </div>
                        </div>
                    `
          })

          html += `</div></div>`
        }

        html += '<h3>–û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:</h3>'
        html += `<pre>${JSON.stringify(data, null, 2)}</pre>`

        resultDiv.innerHTML = html
        resultDiv.classList.add('show')
      }

      // Quick Demo buttons
      async function runDemo(type) {
        showLoading('demoLoading')

        try {
          const response = await fetch(`${API_BASE}/demo/${type}`)
          const result = await response.json()
          hideLoading('demoLoading')

          // Use special image result for t2i
          if (type === 't2i') {
            showImageResult('demoResult', result, response.ok)
          } else {
            showResult('demoResult', result, response.ok)

            // Start polling for job status if task was created (videos only)
            if (response.ok && result.task_id) {
              pollJobStatus(result.task_id, 'demoResult')
            }
          }
        } catch (error) {
          hideLoading('demoLoading')
          showResult('demoResult', { error: error.message }, false)
        }
      }
    </script>
  </body>
</html>
